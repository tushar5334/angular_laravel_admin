"use strict";(self.webpackChunkAngularApp=self.webpackChunkAngularApp||[]).push([[46],{2046:(X,g,n)=>{n.r(g),n.d(g,{EditProfileModule:()=>W});var f=n(9808),d=n(6696),s=n(3075),c=n(8192),h=n(974),e=n(5e3),x=n(6311),C=n(8023),P=n(2709),Z=n(972),w=n(8966),m=n(9224),F=n(4594),p=n(7093),u=n(7322),y=n(7531),T=n(8020),v=n(7423);function E(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Name is required "),e.qZA())}function b(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.name," ")}}function A(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,E,2,0,"div",5),e.YNc(2,b,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.name.errors&&t.editProfileFormControl.name.errors.required),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.name.errors&&t.editProfileFormControl.name.errors.serverValidationError)}}function I(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Email is required "),e.qZA())}function S(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Enter valid email "),e.qZA())}function J(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.email," ")}}function U(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,I,2,0,"div",5),e.YNc(2,S,2,0,"div",5),e.YNc(3,J,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.email.errors&&t.editProfileFormControl.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.email.errors&&t.editProfileFormControl.email.errors.email),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.email.errors&&t.editProfileFormControl.email.errors.serverValidationError)}}function N(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Password is required "),e.qZA())}function q(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," Password should have minimum 5 characters, at least 1 uppercase letter, 1 lowercase letter and 1 number "),e.qZA())}function M(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.password," ")}}function O(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,N,2,0,"div",5),e.YNc(2,q,2,0,"div",23),e.YNc(3,M,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password.errors&&t.editProfileFormControl.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password.errors&&t.editProfileFormControl.password.errors.invalidPassword),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password.errors&&t.editProfileFormControl.password.errors.serverValidationError)}}function Y(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Confirm password is required "),e.qZA())}function L(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," Confirm passwords mast be same as password "),e.qZA())}function Q(r,i){1&r&&(e.TgZ(0,"div",24),e._uU(1," Confirm password should have minimum 5 characters, at least 1 uppercase letter, 1 lowercase letter and 1 number "),e.qZA())}function k(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.password_confirmation," ")}}function V(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,Y,2,0,"div",5),e.YNc(2,L,2,0,"div",23),e.YNc(3,Q,2,0,"div",23),e.YNc(4,k,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password_confirmation.errors&&t.editProfileFormControl.password_confirmation.errors.required),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password_confirmation.errors&&t.editProfileFormControl.password_confirmation.errors.passwordMismatch),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password_confirmation.errors&&t.editProfileFormControl.password_confirmation.errors.invalidPassword),e.xp6(1),e.Q6J("ngIf",t.editProfileFormControl.password_confirmation.errors&&t.editProfileFormControl.password_confirmation.errors.serverValidationError)}}function D(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26),e.NdJ("click",function(){const l=e.CHM(t).index;return e.oxw().openConfirmDialog(l)}),e._UZ(2,"i",27),e.qZA(),e.TgZ(3,"div",28)(4,"span"),e._uU(5),e.qZA()()()}if(2&r){const t=i.$implicit;e.xp6(5),e.Oqu(t.name)}}function z(r,i){if(1&r&&(e.TgZ(0,"div",29)(1,"mat-card",30),e._UZ(2,"img",31),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("src",t.display_picture,e.LSH)("alt","profile pic")}}const R=[{path:"",component:(()=>{class r{constructor(t,o,a,l,_,G,H,K){this.router=t,this.route=o,this.fb=a,this.authService=l,this.userService=_,this.snackbarService=G,this.loaderService=H,this.dialog=K,this.submitted=!1,this.files=[],this.display_picture="",this.serverErrors={},this.editProfileForm=this.fb.group({name:["",[s.kI.required]],email:["",[s.kI.required,s.kI.email]],password:[""],password_confirmation:[""],profile_picture:[""],filesList:this.fb.array([])},{validator:(0,c.dH)("password","password_confirmation")})}ngOnInit(){this.updateValidations(),this.userService.getCurrentUserDetail().subscribe({next:t=>{if(t.data){let o=t.data;this.editProfileForm.patchValue({name:o.name,email:o.email,profile_picture:""!=o.profile_picture&&null!=o.profile_picture?o.profile_picture:""}),this.display_picture=o.display_picture}},error:t=>{if(401===t.status){let o=t.message&&t.error.message?t.error.message:t.message;this.authService.clientSideLogout(),this.snackbarService.error(o)}else this.snackbarService.error(500===t.status?t.message&&t.error.message?t.error.message:t.message:"Something went wrong, Please try again later.")}})}trackByFn(t,o){return t}get editProfileFormControl(){return this.editProfileForm.controls}updateValidations(){this.editProfileFormControl.password.setValidators([(0,c.FW)()]),this.editProfileFormControl.password.updateValueAndValidity(),this.editProfileFormControl.password_confirmation.setValidators([(0,c.FW)()]),this.editProfileFormControl.password_confirmation.updateValueAndValidity()}onFileChange(t){let o;o=t.target?t.target.files:t,this.files=Object.keys(o).map(a=>o[a])}deleteFile(t){this.files=this.files.filter(function(o){return o.name!=t.name})}openConfirmDialog(t){this.dialog.open(h.z,{width:"300px",disableClose:!0,data:{message:`${this.files[t].name} file will be deleted?`,buttonText:{ok:"Confirm",cancel:"Cancel"}}}).afterClosed().subscribe(a=>{a&&this.deleteFromArray(t)})}deleteFromArray(t){this.files.splice(t,1)}onRegister(){if(this.submitted=!0,this.serverErrors={},this.editProfileForm.invalid)return!0;this.loaderService.showLoader();let t=this.editProfileForm.value;t.filesList=this.files,this.userService.updateProfile(t).subscribe({next:o=>{this.submitted=!1,this.loaderService.hideLoader(),this.authService.setItemToLocalStorage("user",JSON.stringify(o.user)),this.authService.updateUserData(o.user),this.snackbarService.success(o.message),this.router.navigate(["/admin"])},error:o=>{if(this.submitted=!1,this.loaderService.hideLoader(),422===o.status&&o.error&&o.error.errors)for(let a in o.error.errors)this.editProfileFormControl[a].setErrors({serverValidationError:!0}),this.serverErrors[a]=o.error.errors[a][0];else if(401===o.status){let a=o.message&&o.error.message?o.error.message:o.message;this.authService.clientSideLogout(),this.snackbarService.error(a)}else this.snackbarService.error(500===o.status?o.message&&o.error.message?o.error.message:o.message:"Something went wrong, Please try again later.")}})}onReset(){this.submitted=!1,this.editProfileForm.reset(),this.updateValidations()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(d.F0),e.Y36(d.gz),e.Y36(s.qu),e.Y36(x.e),e.Y36(C.K),e.Y36(P.o),e.Y36(Z.D),e.Y36(w.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-profile"]],decls:50,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"register-card"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start","fxLayoutGap","20px"],["for","name"],["matInput","","type","text","placeholder","","id","name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","type","text","placeholder","pat@example.com","id","email","formControlName","email"],["for","password"],["matInput","","type","password","placeholder","","id","password","formControlName","password"],["for","password_confirmation"],["matInput","","type","password","placeholder","","id","password_confirmation","formControlName","password_confirmation"],["fileDragDrop","",1,"dropzone",3,"filesChangeEmiter"],[1,"text-wrapper"],[1,"centered"],["type","file","name","file","id","file","accept","image/*",3,"multiple","change"],["for","file"],[1,"textLink"],["class","row fileItem",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","primary",3,"click"],["routerLink","/admin","type","button","mat-raised-button","","color","warn"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"row","fileItem"],[1,"col-sm-12","fileItemIconDiv",3,"click"],[1,"fa-6x","fileItemIcon"],[1,"col-sm-12","fileItemText"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start"],[1,"image-card"],["mat-card-lg-image","",3,"src","alt"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onRegister()}),e.TgZ(1,"mat-card",1)(2,"mat-toolbar")(3,"span"),e._uU(4,"Edit Profile"),e.qZA()(),e.TgZ(5,"mat-card-content")(6,"div",2)(7,"mat-form-field")(8,"mat-label",3),e._uU(9,"Enter your name"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,A,3,2,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label",6),e._uU(14,"Enter your email"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,U,4,3,"mat-error",5),e.qZA()(),e.TgZ(17,"div",2)(18,"mat-form-field")(19,"mat-label",8),e._uU(20,"Enter your password"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,O,4,3,"mat-error",5),e.qZA(),e.TgZ(23,"mat-form-field")(24,"mat-label",10),e._uU(25,"Enter your confirm password"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,V,5,4,"mat-error",5),e.qZA()(),e.TgZ(28,"div",2)(29,"div",12),e.NdJ("filesChangeEmiter",function(l){return o.onFileChange(l)}),e.TgZ(30,"div",13)(31,"div",14)(32,"input",15),e.NdJ("change",function(l){return o.onFileChange(l)}),e.qZA(),e.TgZ(33,"label",16)(34,"span",17),e._uU(35,"Select your file"),e.qZA(),e._uU(36," or Drop it here!"),e.qZA()()()()(),e.TgZ(37,"div",2),e.YNc(38,D,6,1,"div",18),e.qZA(),e.YNc(39,z,3,2,"div",19),e.qZA(),e.TgZ(40,"div",2)(41,"mat-card-actions")(42,"button",20),e._uU(43," Update Profile "),e.qZA()(),e.TgZ(44,"mat-card-actions")(45,"button",21),e.NdJ("click",function(){return o.onReset()}),e._uU(46," Reset "),e.qZA()(),e.TgZ(47,"mat-card-actions")(48,"a",22),e._uU(49,"Back"),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",o.editProfileForm),e.xp6(11),e.Q6J("ngIf",o.submitted||o.editProfileFormControl.name.invalid),e.xp6(5),e.Q6J("ngIf",o.submitted||o.editProfileFormControl.email.invalid),e.xp6(6),e.Q6J("ngIf",o.submitted||o.editProfileFormControl.password.invalid),e.xp6(5),e.Q6J("ngIf",o.submitted||o.editProfileFormControl.password_confirmation.invalid),e.xp6(5),e.Q6J("multiple",!1),e.xp6(6),e.Q6J("ngForOf",o.files)("ngForTrackBy",o.trackByFn),e.xp6(1),e.Q6J("ngIf",o.display_picture),e.xp6(3),e.Q6J("disabled",o.editProfileForm.invalid))},directives:[s._Y,s.JL,s.sg,m.a8,F.Ye,m.dn,p.xw,p.Wh,p.SQ,u.KE,u.hX,y.Nt,s.Fj,s.JJ,s.u,f.O5,u.TO,T.r,f.sg,m.WU,m.hq,v.lW,d.yS,v.zs],styles:['.mat-form-field[_ngcontent-%COMP%]{margin:10px 0 0;width:100%}.toggle-btn-div[_ngcontent-%COMP%]{width:100%}.mat-card-header[_ngcontent-%COMP%]{padding:11px 0 0}.mat-card-actions[_ngcontent-%COMP%]{padding:5px}.mat-raised-button[_ngcontent-%COMP%]{width:100%}.image-card[_ngcontent-%COMP%]{margin:20px 0;width:153px}.text-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.centered[_ngcontent-%COMP%]{font-family:sans-serif;font-size:1.3em;text-align:center}.dropzone[_ngcontent-%COMP%]{height:200px;display:table;width:100%;background-color:#eee;border:dotted 1px #aaa;margin-top:20px}input[type=file][_ngcontent-%COMP%]{display:none}.textLink[_ngcontent-%COMP%]{background-color:#f45e61;color:#fff;padding:10px;border-radius:5px;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.fileItem[_ngcontent-%COMP%]{width:calc(25% - 6px);overflow:hidden;height:-moz-fit-content;height:fit-content;margin:3px;padding:10px;display:block;position:relative;float:left;border:2px dashed #778899;border-radius:5px;transition:.3s ease}.fileItem[_ngcontent-%COMP%]:hover{border:2px solid #c33838;background-color:#c33838bf}.fileItem[_ngcontent-%COMP%]:hover   .fileItemIcon[_ngcontent-%COMP%]:before{content:"face";color:#f5f5f5}.fileItem[_ngcontent-%COMP%]:hover   .fileItemText[_ngcontent-%COMP%]{color:#f5f5f5}.fileItemIconDiv[_ngcontent-%COMP%]{text-align:center}.fileItemIcon[_ngcontent-%COMP%]:before{font-style:normal;content:"\\f15b";color:#789;font-family:"Font Awesome 5 Free";font-weight:900}.fileItemText[_ngcontent-%COMP%]{text-align:center;margin-top:10px;height:40px}']}),r})()}];let B=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[d.Bz.forChild(R)],d.Bz]}),r})();var j=n(764);let W=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,B,j.m]]}),r})()}}]);