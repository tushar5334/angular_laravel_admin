"use strict";(self.webpackChunkAngularApp=self.webpackChunkAngularApp||[]).push([[753],{5753:(Je,A,n)=>{n.r(A),n.d(A,{UserModule:()=>Oe});var u=n(9808),p=n(6696),d=n(4999),Z=n(6087),b=n(4847),x=n(974),D=n(2340),e=n(5e3),l=n(3075),S=n(6311),T=n(8023),y=n(2709),w=n(972),F=n(8966),g=n(7093),m=n(7322),k=n(7531),f=n(6856),v=n(7423),I=n(7238),N=n(7446),h=n(9224),L=n(2368),C=n(2181),P=n(5245),E=n(6499);function O(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function q(r,i){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}function Y(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"th",38)(1,"mat-checkbox",39),e.NdJ("change",function(o){return e.CHM(t),e.oxw().checkUncheckAll(o.checked)}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.allSelected)("color","primary")("indeterminate",t.someChecked())}}function J(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"td",40)(1,"mat-checkbox",41),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.is_selected=o})("ngModelChange",function(){return e.CHM(t),e.oxw().updateAllSelected()}),e.qZA()()}if(2&r){const t=i.$implicit;e.xp6(1),e.Q6J("ngModel",t.is_selected)("color","primary")}}function Q(r,i){1&r&&(e.TgZ(0,"th",38),e._uU(1,"No."),e.qZA())}function R(r,i){if(1&r&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&r){const t=i.index;e.oxw();const a=e.MAs(71);e.xp6(1),e.hij(" ",a.pageSize*a.pageIndex+t+1," ")}}function z(r,i){1&r&&(e.TgZ(0,"th",42),e._uU(1,"Name"),e.qZA())}function V(r,i){if(1&r&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Oqu(t.name)}}function B(r,i){1&r&&(e.TgZ(0,"th",38),e._uU(1,"Image"),e.qZA())}function $(r,i){if(1&r&&(e.ynx(0),e._UZ(1,"img",43),e.BQk()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.display_picture,e.LSH)("alt",t.name)}}function H(r,i){if(1&r&&(e.TgZ(0,"td",40),e.YNc(1,$,2,2,"ng-container",8),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",""!=t.display_picture)}}function j(r,i){1&r&&(e.TgZ(0,"th",42),e._uU(1,"Email"),e.qZA())}function G(r,i){if(1&r&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Oqu(t.email)}}function W(r,i){1&r&&(e.TgZ(0,"th",42),e._uU(1,"User Type"),e.qZA())}function K(r,i){if(1&r&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Oqu(t.user_type)}}function X(r,i){1&r&&(e.TgZ(0,"th",42),e._uU(1,"Created At"),e.qZA())}function ee(r,i){if(1&r&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&r){const t=i.$implicit;e.xp6(1),e.Oqu(t.created_at)}}function te(r,i){1&r&&(e.TgZ(0,"th",42),e._uU(1,"Status"),e.qZA())}function re(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"td",40)(1,"mat-slide-toggle",44),e.NdJ("change",function(o){const c=e.CHM(t).$implicit;return e.oxw().changeStatus(o,c.user_id)}),e.qZA()()}if(2&r){const t=i.$implicit;e.xp6(1),e.Q6J("id","status_"+t.user_id)("color","primary")("checked",t.status)("disabled",!1)}}function ae(r,i){1&r&&(e.TgZ(0,"th",38),e._uU(1,"Action"),e.qZA())}const oe=function(r){return{element:r}};function ie(r,i){if(1&r&&(e.TgZ(0,"td",40)(1,"button",45)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()()()),2&r){const t=i.$implicit;e.oxw();const a=e.MAs(73);e.xp6(1),e.Q6J("matMenuTriggerFor",a)("matMenuTriggerData",e.VKq(2,oe,t))}}function se(r,i){1&r&&e._UZ(0,"tr",46)}function ne(r,i){1&r&&e._UZ(0,"tr",47)}function le(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"a",48)(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Edit"),e.qZA()(),e.TgZ(5,"button",49),e.NdJ("click",function(){const s=e.CHM(t).element;return e.oxw().openConfirmDialog(s.user_id)}),e.TgZ(6,"mat-icon"),e._uU(7,"delete"),e.qZA(),e.TgZ(8,"span"),e._uU(9,"Delete"),e.qZA()()}2&r&&e.MGl("routerLink","/admin/users/edit-user/",i.element.user_id,"")}let de=(()=>{class r{constructor(t,a,o,s,c,U){this.fb=t,this.authService=a,this.userService=o,this.snackbarService=s,this.loaderService=c,this.dialog=U,this.filterForm=this.fb.group({globalFilter:[""],startDate:[""],endDate:[""]}),this.originalUserData=[],this.allSelected=!1,this.totalRows=0,this.pageSize=10,this.currentPage=0,this.sortField="created_at",this.sortDirection="desc",this.pageSizeOptions=[5,10,25,100],this.displayedColumns=["selectAll","index","name","display_picture","email","user_type","created_at","status","action"],this.dataSource=new d.by([])}ngOnInit(){}getUserData(){this.loaderService.showLoader(),this.userService.getUsers(this.currentPage,this.pageSize,this.sortField,this.sortDirection,this.filterForm.value).subscribe({next:t=>{this.dataSource=new d.by(t.data),this.paginator.pageIndex=this.currentPage,this.paginator.length=t.totalCount,this.originalUserData=this.dataSource.data,this.loaderService.hideLoader()},error:t=>{if(this.dataSource=new d.by([]),this.loaderService.hideLoader(),401===t.status){let a=t.message&&t.error.message?t.error.message:t.message;this.authService.clientSideLogout(),this.snackbarService.error(a)}else this.snackbarService.error(500===t.status?t.message&&t.error.message?t.error.message:t.message:"Something went wrong, Please try again later.")}})}deleteRecord(t){this.loaderService.showLoader(),this.userService.deleteRecord({user_id:t}).subscribe({next:a=>{this.loaderService.hideLoader(),this.snackbarService.success(a.message),this.getUserData()},error:a=>{if(this.loaderService.hideLoader(),401===a.status){let o=a.message&&a.error.message?a.error.message:a.message;this.authService.clientSideLogout(),this.snackbarService.error(o)}else this.snackbarService.error(500===a.status?a.message&&a.error.message?a.error.message:a.message:"Something went wrong, Please try again later.")}})}ediSingleRecord(t){console.log("user_id",t)}changeStatus(t,a){this.loaderService.showLoader(),this.userService.changeStatus(a).subscribe({next:o=>{this.loaderService.hideLoader(),this.snackbarService.success(o.message)},error:o=>{if(t.source.checked=!t.checked,this.loaderService.hideLoader(),401===o.status){let s=o.message&&o.error.message?o.error.message:o.message;this.authService.clientSideLogout(),this.snackbarService.error(s)}else this.snackbarService.error(500===o.status?o.message&&o.error.message?o.error.message:o.message:"Something went wrong, Please try again later.")}})}pageChanged(t){console.log({event:t}),this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getUserData()}get filterFormControl(){return this.filterForm.controls}onSearch(){this.filterForm.value.startDate=this.filterForm.value.startDate?(0,u.p6)(this.filterForm.value.startDate,"yyyy-MM-dd","en-US"):"",this.filterForm.value.endDate=this.filterForm.value.endDate?(0,u.p6)(this.filterForm.value.endDate,"yyyy-MM-dd","en-US"):"",this.getUserData()}onReset(){this.filterForm.reset(),this.getUserData()}onExportAll(){let t=this.filterForm.value;window.open(encodeURI(`${D.N.apiUrl}/users/export-user?sortField=${this.sortField}&sortDirection=${this.sortDirection}&globalFilter=${t.globalFilter}&startDate=${t.startDate}&endDate=${t.endDate}`),"_blank")}checkUncheckAll(t){this.allSelected=t,this.dataSource.data.length>0&&this.dataSource.data.forEach(a=>a.is_selected=t)}updateAllSelected(){this.allSelected=this.dataSource.data.every(t=>t.is_selected)}someChecked(){return this.dataSource.data.filter(t=>t.is_selected).length>0&&!this.allSelected}onDeleteAll(){if(this.dataSource.data.filter(t=>t.is_selected).length>0){let t=this.dataSource.data.filter(o=>!0===o.is_selected);this.dialog.open(x.z,{width:"300px",disableClose:!0,data:{message:"Are you sure want to delete this records?",buttonText:{ok:"Yes",cancel:"No"}}}).afterClosed().subscribe(o=>{o?this.deleteAllRecords(t):this.checkUncheckAll(!1)})}else this.snackbarService.error("Please choose at least one record to delete")}deleteAllRecords(t=[]){let a=[];this.loaderService.showLoader(),a=t.map(o=>o.user_id),this.userService.deleteAllRecords({Ids:a}).subscribe({next:o=>{this.paginator.pageIndex=0,this.currentPage=0,this.allSelected=!1,this.loaderService.hideLoader(),this.getUserData(),this.snackbarService.success(o.message)},error:o=>{if(this.checkUncheckAll(!1),this.loaderService.hideLoader(),401===o.status){let s=o.message&&o.error.message?o.error.message:o.message;this.authService.clientSideLogout(),this.snackbarService.error(s)}else this.snackbarService.error(500===o.status?o.message&&o.error.message?o.error.message:o.message:"Something went wrong, Please try again later.")}})}onUpdateStatusAll(t){if(this.dataSource.data.filter(a=>a.is_selected).length>0){let a=this.dataSource.data.filter(s=>!0===s.is_selected);this.dialog.open(x.z,{width:"300px",disableClose:!0,data:{message:"Are you sure want to change status of records?",buttonText:{ok:"Yes",cancel:"No"}}}).afterClosed().subscribe(s=>{s?this.updateAllRecords(a,t):this.checkUncheckAll(!1)})}else this.snackbarService.error("Please choose at least one record to update status")}updateAllRecords(t=[],a){let o=[];this.loaderService.showLoader(),o=t.map(s=>s.user_id),this.userService.updateAllRecords({Ids:o,status:a}).subscribe({next:s=>{this.allSelected=!1,this.loaderService.hideLoader(),this.getUserData(),this.snackbarService.success(s.message)},error:s=>{if(this.checkUncheckAll(!1),this.loaderService.hideLoader(),401===s.status){let c=s.message&&s.error.message?s.error.message:s.message;this.authService.clientSideLogout(),this.snackbarService.error(c)}else this.snackbarService.error(500===s.status?s.message&&s.error.message?s.error.message:s.message:"Something went wrong, Please try again later.")}})}cl(t){alert(t.user_id)}openConfirmDialog(t){this.dialog.open(x.z,{width:"300px",disableClose:!0,data:{message:"Are you sure want to delete this record?",buttonText:{ok:"Yes",cancel:"No"}}}).afterClosed().subscribe(o=>{o&&this.deleteRecord(t)})}resetSatatusOnerror(t=[]){this.dataSource.data=t,this.dataSource.data.forEach(a=>a.status=a.status)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.sort.sortChange.subscribe(t=>{this.paginator.pageIndex=0,this.currentPage=0,this.sortField=this.sort.active,this.sortDirection=this.sort.direction?this.sort.direction:"asc",this.getUserData()}),this.paginator.page.subscribe(t=>{this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getUserData()}),this.getUserData()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(l.qu),e.Y36(S.e),e.Y36(T.K),e.Y36(y.o),e.Y36(w.D),e.Y36(F.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-list"]],viewQuery:function(t,a){if(1&t&&(e.Gf(Z.NW,5),e.Gf(b.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.paginator=o.first),e.iGM(o=e.CRH())&&(a.sort=o.first)}},decls:75,vars:13,consts:[[3,"formGroup"],["fxLayout","row wrap","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start","fxLayoutGap","10px",1,"container"],["matInput","","type","text","placeholder","Search...","formControlName","globalFilter"],[3,"rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Start date"],["matEndDate","","formControlName","endDate","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["fxLayout","row wrap","fxLayout.xs","column","fxLayout.sm","row","fxLayoutAlign","start start","fxLayoutGap","10px"],["mat-raised-button","","color","primary","matTooltip","Search","aria-label","Search",3,"click"],["mat-raised-button","","color","warn","matTooltip","Reset","aria-label","Reset",3,"click"],["mat-raised-button","","color","warn","matTooltip","Delete","aria-label","Delete",3,"click"],["mat-raised-button","","color","primary","matTooltip","Active","aria-label","Active",3,"click"],["mat-raised-button","","matTooltip","Inactive","aria-label","Inactive",3,"click"],["mat-raised-button","","color","accent","matTooltip","Export to excel","aria-label","Export to excel",3,"click"],["fxLayout","row","fxLayoutAlign","start",1,"container"],["routerLink","/admin/users/add-user","mat-raised-button","","color","primary","matTooltip","Add User","aria-label","Add User"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","selectAll"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","display_picture"],["matColumnDef","email"],["matColumnDef","user_type"],["matColumnDef","created_at"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["appStylePaginator","","showFirstLastButtons","","aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["menu","matMenu"],["matMenuContent",""],["mat-header-cell",""],[1,"example-margin",3,"checked","color","indeterminate","change"],["mat-cell",""],[3,"ngModel","color","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-card-sm-image","",3,"src","alt"],[1,"example-margin",3,"id","color","checked","disabled","change"],["mat-icon-button","",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-header-row",""],["mat-row",""],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div")(3,"mat-form-field"),e._UZ(4,"input",2),e.qZA()(),e.TgZ(5,"div")(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Enter a date range"),e.qZA(),e.TgZ(9,"mat-date-range-input",3),e._UZ(10,"input",4)(11,"input",5),e.qZA(),e._UZ(12,"mat-datepicker-toggle",6)(13,"mat-date-range-picker",null,7),e.YNc(15,O,2,0,"mat-error",8),e.YNc(16,q,2,0,"mat-error",8),e.qZA()(),e.TgZ(17,"div",9)(18,"div")(19,"button",10),e.NdJ("click",function(){return a.onSearch()}),e._uU(20," Search "),e.qZA()(),e.TgZ(21,"div")(22,"button",11),e.NdJ("click",function(){return a.onReset()}),e._uU(23," Clear "),e.qZA()(),e.TgZ(24,"div")(25,"button",12),e.NdJ("click",function(){return a.onDeleteAll()}),e._uU(26," Delete "),e.qZA()(),e.TgZ(27,"div")(28,"button",13),e.NdJ("click",function(){return a.onUpdateStatusAll(1)}),e._uU(29," Active "),e.qZA()(),e.TgZ(30,"div")(31,"button",14),e.NdJ("click",function(){return a.onUpdateStatusAll(0)}),e._uU(32," Inactive "),e.qZA()(),e.TgZ(33,"div")(34,"button",15),e.NdJ("click",function(){return a.onExportAll()}),e._uU(35," Export "),e.qZA()()()()(),e.TgZ(36,"div",16)(37,"a",17),e._uU(38," Add User "),e.qZA()(),e.TgZ(39,"div",18)(40,"table",19),e.ynx(41,20),e.YNc(42,Y,2,3,"th",21),e.YNc(43,J,2,2,"td",22),e.BQk(),e.ynx(44,23),e.YNc(45,Q,2,0,"th",21),e.YNc(46,R,2,1,"td",22),e.BQk(),e.ynx(47,24),e.YNc(48,z,2,0,"th",25),e.YNc(49,V,2,1,"td",22),e.BQk(),e.ynx(50,26),e.YNc(51,B,2,0,"th",21),e.YNc(52,H,2,1,"td",22),e.BQk(),e.ynx(53,27),e.YNc(54,j,2,0,"th",25),e.YNc(55,G,2,1,"td",22),e.BQk(),e.ynx(56,28),e.YNc(57,W,2,0,"th",25),e.YNc(58,K,2,1,"td",22),e.BQk(),e.ynx(59,29),e.YNc(60,X,2,0,"th",25),e.YNc(61,ee,2,1,"td",22),e.BQk(),e.ynx(62,30),e.YNc(63,te,2,0,"th",25),e.YNc(64,re,2,4,"td",22),e.BQk(),e.ynx(65,31),e.YNc(66,ae,2,0,"th",21),e.YNc(67,ie,4,4,"td",22),e.BQk(),e.YNc(68,se,1,0,"tr",32),e.YNc(69,ne,1,0,"tr",33),e.qZA(),e._UZ(70,"mat-paginator",34,35),e.qZA(),e.TgZ(72,"mat-menu",null,36),e.YNc(74,le,10,1,"ng-template",37),e.qZA()),2&t){const o=e.MAs(14);e.Q6J("formGroup",a.filterForm),e.xp6(9),e.Q6J("rangePicker",o),e.xp6(3),e.Q6J("for",o),e.xp6(3),e.Q6J("ngIf",a.filterForm.controls.startDate.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",a.filterForm.controls.endDate.hasError("matEndDateInvalid")),e.xp6(24),e.Q6J("dataSource",a.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",a.totalRows)("pageIndex",a.currentPage)("pageSize",a.pageSize)("pageSizeOptions",a.pageSizeOptions)}},directives:[l._Y,l.JL,l.sg,g.xw,g.Wh,g.SQ,m.KE,k.Nt,l.Fj,l.JJ,l.u,m.hX,f.wx,f.zY,f.By,f.nW,m.R9,f._g,u.O5,m.TO,v.lW,I.gM,p.yS,v.zs,d.BZ,b.YE,d.w1,d.fO,d.ge,N.oG,d.Dz,d.ev,l.On,b.nU,h.vP,L.Rr,C.p6,P.Hw,d.as,d.XQ,d.nj,d.Gk,Z.NW,E.c,C.VK,C.KA,C.OP],styles:[".container[_ngcontent-%COMP%]{padding:10px 0}table[_ngcontent-%COMP%]{width:100%}td.mat-column-star[_ngcontent-%COMP%]{width:20px;padding-right:8px!important}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-card-sm-image[_ngcontent-%COMP%]{padding:10px 0;width:80px;height:80px}@media screen and (max-width: 960px){.mat-elevation-z8[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.mat-header-row[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]{display:block;width:100%}.mat-table[_ngcontent-%COMP%]{background:transparent}.mat-table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{display:block;overflow:hidden;height:auto;position:relative;clear:both;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;background-color:#fff;border-radius:3px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%] + .mat-row[_ngcontent-%COMP%]{margin-top:24px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:block;width:100%;padding:0 16px;margin:16px 0;border:0 none}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{padding:0 48px 0 16px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child   a[_ngcontent-%COMP%]{font-size:20px;color:inherit}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child:before{display:none}.mat-table[_ngcontent-%COMP%]   .mat-cell.m-card-sub-title[_ngcontent-%COMP%]{margin-top:-8px;padding:0 48px 0 16px;color:#0000008a}.mat-table[_ngcontent-%COMP%]   .has_label_on_mobile[_ngcontent-%COMP%]:before{content:attr(data-label);display:inline;font-weight:400}.mat-table[_ngcontent-%COMP%]   .mat-column-star[_ngcontent-%COMP%]{width:auto;padding:8px 0 0!important;margin:0;position:absolute;top:0;right:0}.mat-table[_ngcontent-%COMP%]   .mat-column-star[_ngcontent-%COMP%]:before{display:none}.mat-paginator[_ngcontent-%COMP%]{margin-top:24px}}"]}),r})();var _=n(8192),ce=n(4594),me=n(4107),ue=n(508),pe=n(8020);function ge(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Name is required "),e.qZA())}function fe(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.name," ")}}function he(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,ge,2,0,"div",5),e.YNc(2,fe,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userFormControl.name.errors&&t.userFormControl.name.errors.required),e.xp6(1),e.Q6J("ngIf",t.userFormControl.name.errors&&t.userFormControl.name.errors.serverValidationError)}}function _e(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Email is required "),e.qZA())}function xe(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Enter valid email "),e.qZA())}function ve(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.email," ")}}function Ce(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,_e,2,0,"div",5),e.YNc(2,xe,2,0,"div",5),e.YNc(3,ve,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userFormControl.email.errors&&t.userFormControl.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.userFormControl.email.errors&&t.userFormControl.email.errors.email),e.xp6(1),e.Q6J("ngIf",t.userFormControl.email.errors&&t.userFormControl.email.errors.serverValidationError)}}function Ue(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Password is required "),e.qZA())}function be(r,i){1&r&&(e.TgZ(0,"div",29),e._uU(1," Password should have minimum 5 characters, at least 1 uppercase letter, 1 lowercase letter and 1 number "),e.qZA())}function Ae(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.password," ")}}function Ze(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,Ue,2,0,"div",5),e.YNc(2,be,2,0,"div",28),e.YNc(3,Ae,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userFormControl.password.errors&&t.userFormControl.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.userFormControl.password.errors&&t.userFormControl.password.errors.invalidPassword),e.xp6(1),e.Q6J("ngIf",t.userFormControl.password.errors&&t.userFormControl.password.errors.serverValidationError)}}function Se(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," Confirm password is required "),e.qZA())}function Te(r,i){1&r&&(e.TgZ(0,"div",29),e._uU(1," Confirm passwords mast be same as password "),e.qZA())}function ye(r,i){1&r&&(e.TgZ(0,"div",29),e._uU(1," Confirm password should have minimum 5 characters, at least 1 uppercase letter, 1 lowercase letter and 1 number "),e.qZA())}function we(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.password_confirmation," ")}}function Fe(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,Se,2,0,"div",5),e.YNc(2,Te,2,0,"div",28),e.YNc(3,ye,2,0,"div",28),e.YNc(4,we,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userFormControl.password_confirmation.errors&&t.userFormControl.password_confirmation.errors.required),e.xp6(1),e.Q6J("ngIf",t.userFormControl.password_confirmation.errors&&t.userFormControl.password_confirmation.errors.passwordMismatch),e.xp6(1),e.Q6J("ngIf",t.userFormControl.password_confirmation.errors&&t.userFormControl.password_confirmation.errors.invalidPassword),e.xp6(1),e.Q6J("ngIf",t.userFormControl.password_confirmation.errors&&t.userFormControl.password_confirmation.errors.serverValidationError)}}function ke(r,i){1&r&&(e.TgZ(0,"div"),e._uU(1," User type is required "),e.qZA())}function Le(r,i){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.serverErrors.user_type," ")}}function Me(r,i){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,ke,2,0,"div",5),e.YNc(2,Le,2,1,"div",5),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.userFormControl.user_type.errors&&t.userFormControl.user_type.errors.required),e.xp6(1),e.Q6J("ngIf",t.userFormControl.user_type.errors&&t.userFormControl.user_type.errors.serverValidationError)}}function De(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().openConfirmDialog(s)}),e._UZ(2,"i",32),e.qZA(),e.TgZ(3,"div",33)(4,"span"),e._uU(5),e.qZA()()()}if(2&r){const t=i.$implicit;e.xp6(5),e.Oqu(t.name)}}function Ie(r,i){if(1&r&&(e.TgZ(0,"div",34)(1,"mat-card",35),e._UZ(2,"img",36),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("src",t.display_picture,e.LSH)("alt","profile pic")}}let M=(()=>{class r{constructor(t,a,o,s,c,U,qe,Ye){this.router=t,this.route=a,this.fb=o,this.userService=s,this.authService=c,this.snackbarService=U,this.loaderService=qe,this.dialog=Ye,this.submitted=!1,this.files=[],this.user_id="",this.display_picture="",this.btnText="Save",this.titleText="Add",this.serverErrors={},this.userForm=this.fb.group({user_id:["0"],name:["",[l.kI.required]],email:["",[l.kI.required,l.kI.email]],user_type:["",[l.kI.required]],password:[""],password_confirmation:[""],status:[!1],profile_picture:[""],filesList:this.fb.array([])},{validator:(0,_.dH)("password","password_confirmation")})}ngOnInit(){this.user_id=this.route.snapshot.paramMap.get("user_id")||"0",this.btnText="0"!=this.user_id?"Update":"Save",this.titleText="0"!=this.user_id?"Edit":"Add",this.updateValidations(),this.userService.getInitData(this.user_id).subscribe({next:t=>{if(t.data){let a=t.data;this.userForm.patchValue({user_id:a.user_id,name:a.name,email:a.email,user_type:a.user_type,status:a.status,profile_picture:""!=a.profile_picture&&null!=a.profile_picture?a.profile_picture:""}),this.display_picture=a.display_picture}},error:t=>{if(401===t.status){let a=t.message&&t.error.message?t.error.message:t.message;this.authService.clientSideLogout(),this.snackbarService.error(a)}else this.snackbarService.error(500===t.status?t.message&&t.error.message?t.error.message:t.message:"Something went wrong, Please try again later.")}})}trackByFn(t,a){return t}get userFormControl(){return this.userForm.controls}updateValidations(){"0"==this.user_id?(this.userFormControl.password.setValidators([l.kI.required,(0,_.FW)()]),this.userFormControl.password.updateValueAndValidity(),this.userFormControl.password_confirmation.setValidators([l.kI.required,(0,_.FW)()]),this.userFormControl.password_confirmation.updateValueAndValidity()):(this.userFormControl.password.setValidators([(0,_.FW)()]),this.userFormControl.password.updateValueAndValidity(),this.userFormControl.password_confirmation.setValidators([(0,_.FW)()]),this.userFormControl.password_confirmation.updateValueAndValidity())}onFileChange(t){let a;a=t.target?t.target.files:t,this.files=Object.keys(a).map(o=>a[o])}deleteFile(t){this.files=this.files.filter(function(a){return a.name!=t.name})}openConfirmDialog(t){this.dialog.open(x.z,{width:"300px",disableClose:!0,data:{message:`${this.files[t].name} file will be deleted?`,buttonText:{ok:"Confirm",cancel:"Cancel"}}}).afterClosed().subscribe(o=>{o&&this.deleteFromArray(t)})}deleteFromArray(t){this.files.splice(t,1)}onSave(){if(this.submitted=!0,this.serverErrors={},this.userForm.invalid)return!0;this.loaderService.showLoader();let t=this.userForm.value;t.filesList=this.files,this.userService.createOrUpdareRecord(t).subscribe({next:a=>{this.submitted=!1,this.loaderService.hideLoader(),this.snackbarService.success(a.message),this.router.navigate(["/admin/users"])},error:a=>{if(this.submitted=!1,this.loaderService.hideLoader(),422===a.status&&a.error&&a.error.errors)for(let o in a.error.errors)this.userFormControl[o].setErrors({serverValidationError:!0}),this.serverErrors[o]=a.error.errors[o][0];else if(401===a.status){let o=a.message&&a.error.message?a.error.message:a.message;this.authService.clientSideLogout(),this.snackbarService.error(o)}else this.snackbarService.error(500===a.status?a.message&&a.error.message?a.error.message:a.message:"Something went wrong, Please try again later.")}})}onReset(){this.submitted=!1,this.userForm.reset(),this.updateValidations()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.F0),e.Y36(p.gz),e.Y36(l.qu),e.Y36(T.K),e.Y36(S.e),e.Y36(y.o),e.Y36(w.D),e.Y36(F.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-add-edit"]],decls:65,vars:16,consts:[[3,"formGroup","ngSubmit"],[1,"register-card"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start","fxLayoutGap","20px"],["for","name"],["matInput","","type","text","placeholder","","id","name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","type","text","placeholder","pat@example.com","id","email","formControlName","email"],["for","password"],["matInput","","type","password","placeholder","","id","password","formControlName","password"],["for","password_confirmation"],["matInput","","type","password","placeholder","","id","password_confirmation","formControlName","password_confirmation"],["for","user_type"],["formControlName","user_type","name","user_type"],[3,"value"],[1,"toggle-btn-div"],["formControlName","status",1,"example-margin",3,"color"],["fileDragDrop","",1,"dropzone",3,"filesChangeEmiter"],[1,"text-wrapper"],[1,"centered"],["type","file","name","file","id","file","accept","image/*",3,"multiple","change"],["for","file"],[1,"textLink"],["class","row fileItem",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","primary",3,"click"],["routerLink","/admin/users","type","button","mat-raised-button","","color","warn"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"row","fileItem"],[1,"col-sm-12","fileItemIconDiv",3,"click"],[1,"fa-6x","fileItemIcon"],[1,"col-sm-12","fileItemText"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","start"],[1,"image-card"],["mat-card-lg-image","",3,"src","alt"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.onSave()}),e.TgZ(1,"mat-card",1)(2,"mat-toolbar")(3,"span"),e._uU(4),e.qZA()(),e.TgZ(5,"mat-card-content")(6,"div",2)(7,"mat-form-field")(8,"mat-label",3),e._uU(9,"Enter your name"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,he,3,2,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field")(13,"mat-label",6),e._uU(14,"Enter your email"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,Ce,4,3,"mat-error",5),e.qZA()(),e.TgZ(17,"div",2)(18,"mat-form-field")(19,"mat-label",8),e._uU(20,"Enter your password"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,Ze,4,3,"mat-error",5),e.qZA(),e.TgZ(23,"mat-form-field")(24,"mat-label",10),e._uU(25,"Enter your confirm password"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,Fe,5,4,"mat-error",5),e.qZA()(),e.TgZ(28,"div",2)(29,"mat-form-field")(30,"mat-label",12),e._uU(31,"User Type"),e.qZA(),e.TgZ(32,"mat-select",13)(33,"mat-option",14),e._uU(34," Select User Type "),e.qZA(),e.TgZ(35,"mat-option",14),e._uU(36," Admin "),e.qZA(),e.TgZ(37,"mat-option",14),e._uU(38," User "),e.qZA()(),e.YNc(39,Me,3,2,"mat-error",5),e.qZA(),e.TgZ(40,"div",15)(41,"mat-slide-toggle",16),e._uU(42," Status "),e.qZA()()(),e.TgZ(43,"div",2)(44,"div",17),e.NdJ("filesChangeEmiter",function(s){return a.onFileChange(s)}),e.TgZ(45,"div",18)(46,"div",19)(47,"input",20),e.NdJ("change",function(s){return a.onFileChange(s)}),e.qZA(),e.TgZ(48,"label",21)(49,"span",22),e._uU(50,"Select your file"),e.qZA(),e._uU(51," or Drop it here!"),e.qZA()()()()(),e.TgZ(52,"div",2),e.YNc(53,De,6,1,"div",23),e.qZA(),e.YNc(54,Ie,3,2,"div",24),e.qZA(),e.TgZ(55,"div",2)(56,"mat-card-actions")(57,"button",25),e._uU(58),e.qZA()(),e.TgZ(59,"mat-card-actions")(60,"button",26),e.NdJ("click",function(){return a.onReset()}),e._uU(61," Reset "),e.qZA()(),e.TgZ(62,"mat-card-actions")(63,"a",27),e._uU(64,"Back"),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",a.userForm),e.xp6(4),e.hij("",a.titleText," User"),e.xp6(7),e.Q6J("ngIf",a.submitted||a.userFormControl.name.invalid),e.xp6(5),e.Q6J("ngIf",a.submitted||a.userFormControl.email.invalid),e.xp6(6),e.Q6J("ngIf",a.submitted||a.userFormControl.password.invalid),e.xp6(5),e.Q6J("ngIf",a.submitted||a.userFormControl.password_confirmation.invalid),e.xp6(8),e.Q6J("value","Admin"),e.xp6(2),e.Q6J("value","User"),e.xp6(2),e.Q6J("ngIf",a.submitted||a.userFormControl.user_type.invalid),e.xp6(2),e.Q6J("color","primary"),e.xp6(6),e.Q6J("multiple",!1),e.xp6(6),e.Q6J("ngForOf",a.files)("ngForTrackBy",a.trackByFn),e.xp6(1),e.Q6J("ngIf",a.display_picture),e.xp6(3),e.Q6J("disabled",a.userForm.invalid),e.xp6(1),e.hij(" ",a.btnText," "))},directives:[l._Y,l.JL,l.sg,h.a8,ce.Ye,h.dn,g.xw,g.Wh,g.SQ,m.KE,m.hX,k.Nt,l.Fj,l.JJ,l.u,u.O5,m.TO,me.gD,ue.ey,L.Rr,pe.r,u.sg,h.WU,h.hq,v.lW,p.yS,v.zs],styles:['.mat-form-field[_ngcontent-%COMP%]{margin:10px 0 0;width:100%}.toggle-btn-div[_ngcontent-%COMP%]{width:100%}.mat-card-header[_ngcontent-%COMP%]{padding:11px 0 0}.mat-card-actions[_ngcontent-%COMP%]{padding:5px}.mat-raised-button[_ngcontent-%COMP%]{width:100%}.image-card[_ngcontent-%COMP%]{margin:20px 0;width:153px}.text-wrapper[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle}.centered[_ngcontent-%COMP%]{font-family:sans-serif;font-size:1.3em;text-align:center}.dropzone[_ngcontent-%COMP%]{height:200px;display:table;width:100%;background-color:#eee;border:dotted 1px #aaa;margin-top:20px}input[type=file][_ngcontent-%COMP%]{display:none}.textLink[_ngcontent-%COMP%]{background-color:#f45e61;color:#fff;padding:10px;border-radius:5px;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.fileItem[_ngcontent-%COMP%]{width:calc(25% - 6px);overflow:hidden;height:-moz-fit-content;height:fit-content;margin:3px;padding:10px;display:block;position:relative;float:left;border:2px dashed #778899;border-radius:5px;transition:.3s ease}.fileItem[_ngcontent-%COMP%]:hover{border:2px solid #c33838;background-color:#c33838bf}.fileItem[_ngcontent-%COMP%]:hover   .fileItemIcon[_ngcontent-%COMP%]:before{content:"face";color:#f5f5f5}.fileItem[_ngcontent-%COMP%]:hover   .fileItemText[_ngcontent-%COMP%]{color:#f5f5f5}.fileItemIconDiv[_ngcontent-%COMP%]{text-align:center}.fileItemIcon[_ngcontent-%COMP%]:before{font-style:normal;content:"\\f15b";color:#789;font-family:"Font Awesome 5 Free";font-weight:900}.fileItemText[_ngcontent-%COMP%]{text-align:center;margin-top:10px;height:40px}']}),r})();const Ne=[{path:"",component:de},{path:"add-user",component:M},{path:"edit-user/:user_id",component:M}];let Pe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.Bz.forChild(Ne)],p.Bz]}),r})();var Ee=n(764);let Oe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.ez,Pe,Ee.m]]}),r})()}}]);